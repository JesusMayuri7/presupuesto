{"version":3,"sources":["D:/laragon/www/programacion/angular/~/ng-lazyload-image/index.js","D:/laragon/www/programacion/angular/~/ng-lazyload-image/src/lazyload-image.directive.js","D:/laragon/www/programacion/angular/~/ng-lazyload-image/src/lazyload-image.js","D:/laragon/www/programacion/angular/~/ng-lazyload-image/src/lazyload-image.module.js","D:/laragon/www/programacion/angular/~/ng-lazyload-image/src/rect.js","D:/laragon/www/programacion/angular/~/ng-lazyload-image/src/scroll-listener.js"],"names":[],"mappings":";;;;;;AAAA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA,iC;;;;;;;;ACPA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA;AACA;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,uMAAuM,EAAE;AACtP,+CAA+C,mCAAmC,EAAE;AACpF,SAAS;AACT;AACA;AACA;AACA,6CAA6C,qDAAqD,EAAE;AACpG,8CAA8C,mCAAmC,EAAE;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,CAAC;AACD;AACA,oD;;;;;;;;ACtGA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,eAAe;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,oBAAoB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,YAAY,EAAE;AAC5C,8BAA8B,+BAA+B,EAAE;AAC/D;AACA;AACA;AACA;AACA;AACA,+BAA+B,mBAAmB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,4DAA4D,EAAE;AAC/F;AACA,mCAAmC,iDAAiD,EAAE;AACtF,6BAA6B,gEAAgE,EAAE;AAC/F,8BAA8B,aAAa,EAAE;AAC7C;AACA;AACA;AACA;AACA,SAAS;AACT,6BAA6B,gCAAgC,EAAE;AAC/D;AACA;AACA;AACA,0C;;;;;;;;ACzIA;AACA;AACA;AACA;AACA,4CAA4C,QAAQ;AACpD;AACA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,CAAC;AACD;AACA,iD;;;;;;;;ACtBA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,gC;;;;;;;;AC5CA;AACA,8CAA8C,cAAc;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,6BAA6B;AACrE,uBAAuB;AACvB;AACA,4BAA4B,sEAAsE;AAClG,KAAK;AACL;AACA;AACA;AACA;AACA,2C","file":"0.chunk.js","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar lazyload_image_directive_1 = require(\"./src/lazyload-image.directive\");\nexports.LazyLoadImageDirective = lazyload_image_directive_1.LazyLoadImageDirective;\nvar lazyload_image_module_1 = require(\"./src/lazyload-image.module\");\nexports.LazyLoadImageModule = lazyload_image_module_1.LazyLoadImageModule;\nexports.default = lazyload_image_module_1.LazyLoadImageModule;\n//# sourceMappingURL=index.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// D:/laragon/www/programacion/angular/~/ng-lazyload-image/index.js\n// module id = ../../../../ng-lazyload-image/index.js\n// module chunks = 0","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nrequire(\"rxjs/add/operator/let\");\nrequire(\"rxjs/add/operator/switchMap\");\nrequire(\"rxjs/add/operator/debounceTime\");\nvar ReplaySubject_1 = require(\"rxjs/ReplaySubject\");\nvar core_1 = require(\"@angular/core\");\nvar scroll_listener_1 = require(\"./scroll-listener\");\nvar lazyload_image_1 = require(\"./lazyload-image\");\nvar windowTarget = typeof window !== 'undefined' ? window : undefined;\nvar LazyLoadImageDirective = (function () {\n    function LazyLoadImageDirective(el, ngZone) {\n        this.onLoad = new core_1.EventEmitter();\n        this.elementRef = el;\n        this.ngZone = ngZone;\n        this.propertyChanges$ = new ReplaySubject_1.ReplaySubject();\n    }\n    LazyLoadImageDirective.prototype.ngOnChanges = function (changes) {\n        this.propertyChanges$.next({\n            lazyImage: this.lazyImage,\n            defaultImage: this.defaultImage,\n            errorImage: this.errorImage,\n            scrollTarget: this.scrollTarget,\n            scrollObservable: this.scrollObservable,\n            offset: this.offset | 0,\n            useSrcset: this.useSrcset\n        });\n    };\n    LazyLoadImageDirective.prototype.ngAfterContentInit = function () {\n        var _this = this;\n        if (typeof window === 'undefined') {\n            return null;\n        }\n        this.ngZone.runOutsideAngular(function () {\n            var scrollObservable;\n            if (_this.scrollObservable) {\n                scrollObservable = _this.scrollObservable.startWith('');\n            }\n            else {\n                scrollObservable = scroll_listener_1.getScrollListener(_this.scrollTarget || windowTarget);\n            }\n            _this.scrollSubscription = _this.propertyChanges$\n                .debounceTime(10)\n                .switchMap(function (props) { return scrollObservable.let(lazyload_image_1.lazyLoadImage(_this.elementRef.nativeElement, props.lazyImage, props.defaultImage, props.errorImage, props.offset, props.useSrcset, props.scrollTarget)); })\n                .subscribe(function (success) { return _this.onLoad.emit(success); });\n        });\n    };\n    LazyLoadImageDirective.prototype.ngOnDestroy = function () {\n        [this.scrollSubscription]\n            .filter(function (subscription) { return subscription && !subscription.isUnsubscribed; })\n            .forEach(function (subscription) { return subscription.unsubscribe(); });\n    };\n    __decorate([\n        core_1.Input('lazyLoad'),\n        __metadata(\"design:type\", Object)\n    ], LazyLoadImageDirective.prototype, \"lazyImage\", void 0);\n    __decorate([\n        core_1.Input(),\n        __metadata(\"design:type\", String)\n    ], LazyLoadImageDirective.prototype, \"defaultImage\", void 0);\n    __decorate([\n        core_1.Input(),\n        __metadata(\"design:type\", String)\n    ], LazyLoadImageDirective.prototype, \"errorImage\", void 0);\n    __decorate([\n        core_1.Input(),\n        __metadata(\"design:type\", Object)\n    ], LazyLoadImageDirective.prototype, \"scrollTarget\", void 0);\n    __decorate([\n        core_1.Input(),\n        __metadata(\"design:type\", Object)\n    ], LazyLoadImageDirective.prototype, \"scrollObservable\", void 0);\n    __decorate([\n        core_1.Input(),\n        __metadata(\"design:type\", Number)\n    ], LazyLoadImageDirective.prototype, \"offset\", void 0);\n    __decorate([\n        core_1.Input(),\n        __metadata(\"design:type\", Boolean)\n    ], LazyLoadImageDirective.prototype, \"useSrcset\", void 0);\n    __decorate([\n        core_1.Output(),\n        __metadata(\"design:type\", core_1.EventEmitter)\n    ], LazyLoadImageDirective.prototype, \"onLoad\", void 0);\n    LazyLoadImageDirective = __decorate([\n        core_1.Directive({\n            selector: '[lazyLoad]'\n        }),\n        __metadata(\"design:paramtypes\", [core_1.ElementRef, core_1.NgZone])\n    ], LazyLoadImageDirective);\n    return LazyLoadImageDirective;\n}());\nexports.LazyLoadImageDirective = LazyLoadImageDirective;\n//# sourceMappingURL=lazyload-image.directive.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// D:/laragon/www/programacion/angular/~/ng-lazyload-image/src/lazyload-image.directive.js\n// module id = ../../../../ng-lazyload-image/src/lazyload-image.directive.js\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nrequire(\"rxjs/add/operator/filter\");\nrequire(\"rxjs/add/operator/do\");\nrequire(\"rxjs/add/operator/take\");\nrequire(\"rxjs/add/operator/map\");\nrequire(\"rxjs/add/operator/mergeMap\");\nrequire(\"rxjs/add/operator/catch\");\nrequire(\"rxjs/add/observable/of\");\nvar Observable_1 = require(\"rxjs/Observable\");\nvar rect_1 = require(\"./rect\");\nfunction isVisible(element, threshold, _window, scrollContainer) {\n    if (threshold === void 0) { threshold = 0; }\n    var elementBounds = rect_1.Rect.fromElement(element);\n    var windowBounds = rect_1.Rect.fromWindow(_window);\n    elementBounds.inflate(threshold);\n    if (scrollContainer) {\n        var scrollContainerBounds = rect_1.Rect.fromElement(scrollContainer);\n        var intersection = scrollContainerBounds.getIntersectionWith(windowBounds);\n        return elementBounds.intersectsWith(intersection);\n    }\n    else {\n        return elementBounds.intersectsWith(windowBounds);\n    }\n}\nexports.isVisible = isVisible;\nfunction isChildOfPicture(element) {\n    return Boolean(element.parentElement && element.parentElement.nodeName.toLowerCase() === 'picture');\n}\nexports.isChildOfPicture = isChildOfPicture;\nfunction isImageElement(element) {\n    return element.nodeName.toLowerCase() === 'img';\n}\nexports.isImageElement = isImageElement;\nfunction loadImage(element, imagePath, useSrcset) {\n    var img;\n    if (isImageElement(element) && isChildOfPicture(element)) {\n        var parentClone = element.parentNode.cloneNode(true);\n        img = parentClone.getElementsByTagName('img')[0];\n        setSourcesToLazy(img);\n        setImage(img, imagePath, useSrcset);\n    }\n    else {\n        img = new Image();\n        if (isImageElement(element) && element.sizes) {\n            img.sizes = element.sizes;\n        }\n        if (useSrcset) {\n            img.srcset = imagePath;\n        }\n        else {\n            img.src = imagePath;\n        }\n    }\n    return Observable_1.Observable\n        .create(function (observer) {\n        img.onload = function () {\n            observer.next(imagePath);\n            observer.complete();\n        };\n        img.onerror = function (err) {\n            observer.error(null);\n        };\n    });\n}\nfunction setImage(element, imagePath, useSrcset) {\n    if (isImageElement(element)) {\n        if (useSrcset) {\n            element.srcset = imagePath;\n        }\n        else {\n            element.src = imagePath;\n        }\n    }\n    else {\n        element.style.backgroundImage = \"url('\" + imagePath + \"')\";\n    }\n    return element;\n}\nfunction setSources(attrName) {\n    return function (image) {\n        var sources = image.parentElement.getElementsByTagName('source');\n        for (var i = 0; i < sources.length; i++) {\n            var attrValue = sources[i].getAttribute(attrName);\n            if (attrValue) {\n                sources[i].srcset = attrValue;\n            }\n        }\n    };\n}\nvar setSourcesToDefault = setSources('defaultImage');\nvar setSourcesToLazy = setSources('lazyLoad');\nvar setSourcesToError = setSources('errorImage');\nfunction setImageAndSources(setSourcesFn) {\n    return function (element, imagePath, useSrcset) {\n        if (isImageElement(element) && isChildOfPicture(element)) {\n            setSourcesFn(element);\n        }\n        if (imagePath) {\n            setImage(element, imagePath, useSrcset);\n        }\n    };\n}\nvar setImageAndSourcesToDefault = setImageAndSources(setSourcesToDefault);\nvar setImageAndSourcesToLazy = setImageAndSources(setSourcesToLazy);\nvar setImageAndSourcesToError = setImageAndSources(setSourcesToError);\nfunction setLoadedStyle(element) {\n    var styles = element.className\n        .split(' ')\n        .filter(function (s) { return !!s; })\n        .filter(function (s) { return s !== 'ng-lazyloading'; });\n    styles.push('ng-lazyloaded');\n    element.className = styles.join(' ');\n    return element;\n}\nfunction lazyLoadImage(element, imagePath, defaultImagePath, errorImgPath, offset, useSrcset, scrollContainer) {\n    if (useSrcset === void 0) { useSrcset = false; }\n    setImageAndSourcesToDefault(element, defaultImagePath, useSrcset);\n    if (element.className && element.className.includes('ng-lazyloaded')) {\n        element.className = element.className.replace('ng-lazyloaded', '');\n    }\n    return function (scrollObservable) {\n        return scrollObservable\n            .filter(function () { return isVisible(element, offset, window, scrollContainer); })\n            .take(1)\n            .mergeMap(function () { return loadImage(element, imagePath, useSrcset); })\n            .do(function () { return setImageAndSourcesToLazy(element, imagePath, useSrcset); })\n            .map(function () { return true; })\n            .catch(function () {\n            setImageAndSourcesToError(element, errorImgPath, useSrcset);\n            element.className += ' ng-failed-lazyloaded';\n            return Observable_1.Observable.of(false);\n        })\n            .do(function () { return setLoadedStyle(element); });\n    };\n}\nexports.lazyLoadImage = lazyLoadImage;\n//# sourceMappingURL=lazyload-image.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// D:/laragon/www/programacion/angular/~/ng-lazyload-image/src/lazyload-image.js\n// module id = ../../../../ng-lazyload-image/src/lazyload-image.js\n// module chunks = 0","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar core_1 = require(\"@angular/core\");\nvar lazyload_image_directive_1 = require(\"./lazyload-image.directive\");\nvar LazyLoadImageModule = (function () {\n    function LazyLoadImageModule() {\n    }\n    LazyLoadImageModule = __decorate([\n        core_1.NgModule({\n            declarations: [lazyload_image_directive_1.LazyLoadImageDirective],\n            exports: [lazyload_image_directive_1.LazyLoadImageDirective]\n        })\n    ], LazyLoadImageModule);\n    return LazyLoadImageModule;\n}());\nexports.LazyLoadImageModule = LazyLoadImageModule;\n//# sourceMappingURL=lazyload-image.module.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// D:/laragon/www/programacion/angular/~/ng-lazyload-image/src/lazyload-image.module.js\n// module id = ../../../../ng-lazyload-image/src/lazyload-image.module.js\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Rect = (function () {\n    function Rect(left, top, right, bottom) {\n        this.left = left;\n        this.top = top;\n        this.right = right;\n        this.bottom = bottom;\n    }\n    Rect.fromElement = function (element) {\n        var _a = element.getBoundingClientRect(), left = _a.left, top = _a.top, right = _a.right, bottom = _a.bottom;\n        return new Rect(left, top, right, bottom);\n    };\n    Rect.fromWindow = function (_window) {\n        return new Rect(0, 0, _window.innerWidth, _window.innerHeight);\n    };\n    Rect.prototype.inflate = function (inflateBy) {\n        this.left -= inflateBy;\n        this.top -= inflateBy;\n        this.right += inflateBy;\n        this.bottom += inflateBy;\n    };\n    Rect.prototype.intersectsWith = function (rect) {\n        return (rect.left < this.right) &&\n            (this.left < rect.right) &&\n            (rect.top < this.bottom) &&\n            (this.top < rect.bottom);\n    };\n    Rect.prototype.getIntersectionWith = function (rect) {\n        var left = Math.max(this.left, rect.left);\n        var top = Math.max(this.top, rect.top);\n        var right = Math.min(this.right, rect.right);\n        var bottom = Math.min(this.bottom, rect.bottom);\n        if (right >= left && bottom >= top) {\n            return new Rect(left, top, right, bottom);\n        }\n        else {\n            return Rect.empty;\n        }\n    };\n    Rect.empty = new Rect(0, 0, 0, 0);\n    return Rect;\n}());\nexports.Rect = Rect;\n//# sourceMappingURL=rect.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// D:/laragon/www/programacion/angular/~/ng-lazyload-image/src/rect.js\n// module id = ../../../../ng-lazyload-image/src/rect.js\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nrequire(\"rxjs/add/operator/startWith\");\nrequire(\"rxjs/add/operator/sampleTime\");\nrequire(\"rxjs/add/operator/share\");\nrequire(\"rxjs/add/observable/empty\");\nvar Observable_1 = require(\"rxjs/Observable\");\nvar scrollListeners = new WeakMap();\nfunction sampleObservable(obs, scheduler) {\n    return obs\n        .sampleTime(100, scheduler)\n        .share()\n        .startWith('');\n}\nexports.sampleObservable = sampleObservable;\nexports.getScrollListener = function (scrollTarget) {\n    if (!scrollTarget || typeof scrollTarget.addEventListener !== 'function') {\n        if (typeof window !== 'undefined') {\n            console.warn('`addEventListener` on ' + scrollTarget + ' (scrollTarget) is not a function. Skipping this target');\n        }\n        return Observable_1.Observable.empty();\n    }\n    if (scrollListeners.has(scrollTarget)) {\n        return scrollListeners.get(scrollTarget);\n    }\n    var srollEvent = Observable_1.Observable.create(function (observer) {\n        var eventName = 'scroll';\n        var handler = function (event) { return observer.next(event); };\n        var options = { passive: true, capture: false };\n        scrollTarget.addEventListener(eventName, handler, options);\n        return function () { return scrollTarget.removeEventListener(eventName, handler, options); };\n    });\n    var listener = sampleObservable(srollEvent);\n    scrollListeners.set(scrollTarget, listener);\n    return listener;\n};\n//# sourceMappingURL=scroll-listener.js.map\n\n\n//////////////////\n// WEBPACK FOOTER\n// D:/laragon/www/programacion/angular/~/ng-lazyload-image/src/scroll-listener.js\n// module id = ../../../../ng-lazyload-image/src/scroll-listener.js\n// module chunks = 0"],"sourceRoot":"webpack:///"}